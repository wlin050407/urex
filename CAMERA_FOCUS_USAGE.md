# 相机聚焦功能使用说明

## 🎯 当前实现

现在相机会**正对卫星**，具体表现为：

### 相机位置计算

```
地球中心 ───────→ 卫星 ────→ 相机
         (方向)        (距离2.5单位)
```

**算法**：
1. 计算从地球中心指向卫星的方向向量
2. 相机位置 = 卫星位置 + (方向 × 距离)
3. 相机目标 = 卫星位置（OrbitControls.target）

**效果**：
- ✅ 相机在卫星的外侧（远离地球的一侧）
- ✅ 相机正对着卫星
- ✅ 卫星在视野中心
- ✅ 可以清楚地看到卫星和背后的地球

## 🎮 使用方法

1. **选择卫星**：在右侧面板选择任意卫星（如 ISS）
2. **点击 Focus**：在 Quick Actions 区域点击 Focus 按钮
3. **观看动画**：相机会用 1.5 秒平滑移动到卫星位置
4. **调整视角**：到达后可以用鼠标旋转、缩放调整

## 🔧 调整参数

如果你想改变相机距离卫星的远近，可以修改：

**文件**：`src/components/CameraController.tsx`

**行数**：约第 146 行

```typescript
// 相机距离卫星的距离（可以调整这个值来改变相机远近）
const cameraDistance = 2.5 // 距离卫星2.5个单位
```

### 推荐值

| 距离 | 效果 |
|------|------|
| `1.5` | 非常近，适合查看小型卫星细节 |
| `2.5` | 默认值，平衡的观察距离 ✅ |
| `3.5` | 较远，可以看到更多周围环境 |
| `5.0` | 很远，全景视角 |

## 📐 坐标系统说明

```
              相机 (Camera)
                ↑
                │ 2.5 units
                │
            卫星 (Satellite)
                ↑
                │ ~5-7 units (轨道高度)
                │
          地球中心 (Earth Center)
```

**关键点**：
- 相机、卫星、地球中心在同一条直线上
- 相机看向卫星（controls.target = satellite position）
- 地球在卫星背后，形成美观的背景

## 🎨 视觉效果

### 聚焦前
```
     🌍 地球
    /  |  \
   /   |   \
  📷相机  🛰️卫星
  (远处)  (在某处)
```

### 聚焦后
```
        📷相机
         ↓ (看向)
       🛰️卫星
         ↓ (背后)
        🌍地球
```

## 🐛 故障排除

### 问题：点击 Focus 没有反应

**检查控制台日志**：
```
✅ 正常：应该看到
🎯 Focus button clicked for: ISS
🎯 setFocusedSatellite called with: null
🎯 setFocusedSatellite called with: ISS
👀 Focus effect triggered: ...
🎯 Focusing on satellite: ISS
🚀 Starting camera animation...
✅ Camera animation complete!

❌ 异常：如果没有这些日志
- 检查是否选择了卫星
- 检查浏览器控制台是否有错误
- 刷新页面重试
```

### 问题：相机移动了但看不到卫星

**可能原因**：
1. **距离太近**：增大 `cameraDistance` 值
2. **卫星太小**：卫星模型可能很小，放大查看
3. **地球遮挡**：卫星可能在地球后面，等待几秒钟

### 问题：动画太快或太慢

**修改动画时长**：
```typescript
// 第 160 行附近
animateCameraToPosition(camera, controlsRef.current, cameraPosition, satellitePos, 1500)
//                                                                              ^^^^
//                                                                              改这里（毫秒）
```

建议值：
- `500` = 0.5秒（快速）
- `1500` = 1.5秒（默认）✅
- `3000` = 3秒（缓慢、平滑）

## 🚀 进阶功能（可选实现）

### 1. 跟随模式
相机持续跟随卫星移动（需要在 useFrame 中更新）

### 2. 预设视角
- 俯视角度
- 侧视角度
- 地面视角（从地球表面看）

### 3. 自定义距离
在 UI 面板添加滑块，让用户动态调整距离

### 4. 多卫星对比视角
同时聚焦多个卫星，分屏显示

## 日期
2025-10-16


